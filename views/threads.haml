.breadcrumb
  %a{:href => "/#{params[:folder]}/"}
    = params[:folder]
  >
  - if @addresses.has_key? @address
    = @addresses[@address]['label']
  - else
    = @address
.thread
  - @threads.each do |thread, messages|
    - new = ThreadStatus.instance.new_messages?(@address, thread)
    %div{:class => (new ? "new" : "old")}
      %a{:href => "./#{CGI.escape(thread)}"}
        &= thread

      \- Last Updated:
      = Time.at(MessageStore.instance.thread_last_updates[@address][thread]).to_datetime
      %form.inline{:method => :post, :action => "/#{params[:folder]}/thread/delete", :onsubmit => "return confirm('Really delete whole thread?');"}
        %input{:type => :hidden, :name => :address, :value => @address}
        %input{:type => :hidden, :name => :thread, :value => thread}
        %input.small_button{:type => :submit, :value => "Delete"}